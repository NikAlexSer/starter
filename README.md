# Starter #

Boilerplate для верстки проектов.

## Структура ##

* Таск раннер - [Gulp](http://gulpjs.com/)
* Сервер - [Express](http://expressjs.com/ru/guide/routing.html)
* Препроцессор [Less](http://lesscss.org/)
* Шаблонизатор [Nunjucks](https://mozilla.github.io/nunjucks/)

### Config ###

Файл конфига лежит в корне проекта.
- devStatic  - Путь до папки с ассетами. по умолчнию равен '/'
- buildStatic  - Путь до папки с ассетами для готовой сборки. по умолчнию равен '/'
- buildDir  - Имя папки в которую будет все собираться. Если поменяли это значение, не забудьте добавить вашу новую директорию в гитигнор.
- port - порт на котором будет запущен сервер
- dpe - Если сайт создается под эту платформу, то обязательно аереключаем на true. тогда при экспорте все ссылки на фалы будут заменены на необходимую для этой платформы конструкцию типа: ``` @File('js/your_js_file.js') ```
- commonData - список имен файлов, которые будут передавться во все компилируемы шаблоны. Файлы должны лежать в корне папки 'datasource'
- pages - Список страниц проекта. В него передается объект следующего вида: 

	```
	{
		"name": "index",
		"route": "/",
		"pageData": [],
		"pageVars": {}
	}

	```
- name - Имя фала с шаблоном
- route - роут по которму будет отдаваться текущий шаблон
- pageData - массив состоящий из имен фалов (.json) для вставки в текущий шаблон. Например, если мы указываем, что у данной страницы есть PageData = ['news', 'activity'] то это означает, что в шаблон будут переданы два json файла из папки ./datasource с указанными именами. Данные будут находится в ключах соответсвующих названию файла. Т.е. для отображения списка новостей можно использовать следующую конструкцию

```
<div class="news">
	{% for item in news %}
		<div class="news__item">
			<div class="news__imgbox">
				<img src="{{ item.img|img_asset }}" alt="">
			</div>
			<div class="news__title">{{ item.title }}</div>
			<div class="news__text">{{ item.text }}</div>
			<a href="{{ item.link }}">подробнее</a>
		</div>
	{% endfor %}
</div>

```  
### Немного про фильтры ###

В шаблонизаторе есть набор [готовых фильтров](https://mozilla.github.io/nunjucks/templating.html#builtin-filters), под различные нужды. 
Т.к. данный boilerplate создавался фактически для одной единственной цели, а именно не трахаться с заменой статики при экспорте верстки под различные платформы, (+ избавиться от кучи ручного копипаста), то естественно в мозги шаблонизатора был вкорячен некоторый набор фильтров. Обязательны к использованию только asset фильтры. 

#### Лукморе asset, img_asset, css_asset ... etc ####

Приминение img_asset в src атрибуте картинки: 

```
// такой src 
<img src="{{ 'logo.png'|img_asset }}" alt="">

// будет преобразован в =>
<img src="images/logo.png">

// или в такой (если config.dpe = true ) 
<img src="@File('images/logo.png')">
```


Еще кучка примеров использования:

```
<link href="{{ 'style.css'|css_asset }}" rel="stylesheet" type="text/css">

<script src="{{ 'common.js'|js_asset }}"></script>

<div style="background-image: url({{ 'pic.jpg'|img_asset }})"></div>

```

> Есть маленький нотис. Если мы используем фильтр на строковом значении (например logo.png), То, естественно мы должны заключить это значение в кавыки, чтобы пояснить за тип). Имя переменно в кавыки заключать не надо. 

```
{% set img = 'logo.png' %}

<img src="{{ img|img_asset }}" alt="">
```


#### Пояснялка за loop фильтр ;) ####

Иногда (на самом деле почти всегда), верстку делать надо а контента еще нет. чтобы не копипастить всякие списочные итемы руками, я написал небольшой фильтр. В него передается массив элементов, которые мы хотим итерировать, а так же единственный аргумент - количество итераций
Если в массиве всего 2 итема, а в дизайне список из 12 итемов, то нет необходимости засерать шаблон ненужным копипастом. 
Лучше используй фильтр loop. Ниже написано как это делать =)

```
{% set news = [
	{
		title: "Какой-то заголовок 1",
		text: "Немного букв 1"
	},
	{
		title: "Какой-то заголовок 2",
		text: "Немного букв 2"
	}
] %}


// Данный цикл будет итерировать уже не массив news а новый массив, который будет состоять из елементов массива news c с длинной массива = 12

{% for item in news|loop(12) %}
	<div>
		<div>{{ item.title }}</div>
		<div>{{ item.text }}</div>
	</div>
{% endfor %}

```